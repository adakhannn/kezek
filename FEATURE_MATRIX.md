# Feature Matrix — карта модулей Kezek

**Назначение**: табличный обзор основных модулей системы, их статуса, рисков и следующих шагов. Используется как **точка входа при планировании спринта** и при оценке объёма работ по направлению.

Обновлять матрицу при значимых изменениях в модуле или по итогам спринта. Связанные документы: `EVOLUTION_TECH_PLAN.md`, `SYSTEM_FEATURES_DOCUMENTATION.md`, `CONTRIBUTING.md`.

---

## Таблица модулей

| Модуль | Статус | Ключевые риски | Следующие 1–2 задачи |
|--------|--------|----------------|----------------------|
| **Бронирование** (публичное + API) | **stable** | Сложные сценарии слотов (временные переводы, граничные даты); рост нагрузки на RPC слотов при большом числе мастеров. | 1) Мониторинг воронки и конверсии по шагам (уже есть funnel_events + админ-отчёт). 2) При появлении багов — расширить E2E на edge-cases слотов. |
| **QuickDesk** | **stable** | Зависимость от единого списка бронирований и фильтров; при очень большом объёме данных возможна медленная загрузка. | 1) При запросах операторов — добавить пресеты (например, по филиалу). 2) Пагинация/виртуализация при росте числа записей. |
| **Staff‑кабинет** (web) | **stable** | Много страниц (расписание, слоты, финансы, статистика); изменения в одном месте могут задеть смежные. | 1) Увеличить покрытие unit-тестами страниц сотрудника. 2) При добавлении новых настроек — расширить audit log (6.2.1) на эти поля. |
| **Финансы** (смены, расчёты, отчёты) | **stable** | Сложные формулы (гарантия, доплата, нормализация %); споры по суммам требуют логов и прозрачности. | 1) Поднимать порог покрытия Jest (50%+). 2) При появлении новых типов выплат — зафиксировать в SYSTEM_FEATURES_DOCUMENTATION и формулах. |
| **Промо/акции** | **stable** | Ограничения по срокам и количеству использований; комбинации нескольких промо. | 1) При добавлении новых типов акций — описать в домене и документации. 2) E2E уже покрывает основные и граничные сценарии. |
| **Рейтинги** | **stable** | Зависимость от cron пересчёта; при сбое cron метрики устаревают. | 1) Алерты при падении/задержке cron (health-check или мониторинг). 2) Отображение «давности» пересчёта в админке уже есть. |
| **WhatsApp / Telegram** | **beta** | Внешние API (лимиты, доступность); OTP и верификация зависят от доставки сообщений. | 1) Явно отображать статус интеграций в system health. 2) Retry/backoff и понятные ошибки при недоступности провайдера. |
| **Mobile** (приложение) | **stable** | Офлайн-очередь и синхронизация; расхождение поведения с web при изменении API. | 1) Расширить smoke-тесты на новые экраны при их добавлении. 2) Регрессионная проверка на реальных устройствах перед релизом. |

---

## Легенда статусов

- **stable** — модуль в проде, основные сценарии покрыты тестами и/или документацией, известные риски учтены.
- **beta** — функциональность работает, но есть внешние зависимости или ограниченная проверка в проде; нужен мониторинг или доработки.
- **planned** — запланировано к реализации или существенной переработке (в текущей матрице не используется).

---

## Как использовать при планировании спринта

1. Выбрать модуль(ы), которые затрагивает спринт.
2. В столбце «Следующие 1–2 задачи» взять кандидатов в бэклог.
3. Учесть «Ключевые риски» при оценке и тестировании.
4. После завершения значимых изменений — обновить строку модуля (статус, риски, следующие задачи) и при необходимости `EVOLUTION_TECH_PLAN.md`.
