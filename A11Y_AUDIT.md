# Аудит доступности (a11y)

Выборочная проверка ключевых страниц на соответствие базовым требованиям доступности: роли, ARIA, контраст, управление с клавиатуры (фокус).

## Ключевые страницы для проверки

| Страница | URL (пример) | Назначение |
|----------|--------------|------------|
| **Бронирование** | `/b/[slug]` (публичная страница бизнеса) | Выбор филиала, услуги, мастера, даты/времени, подтверждение |
| **Дашборд** | `/dashboard`, `/dashboard/bookings`, `/dashboard/staff`, `/dashboard/branches` | Управление бронями, сотрудниками, филиалами (владелец/менеджер) |
| **Кабинет клиента** | `/cabinet`, `/cabinet/bookings`, `/cabinet/profile` | Список бронирований, профиль, отзывы |

## Чеклист проверки

Для каждой ключевой страницы выборочно проверить:

### 1. Роли и семантика

- [ ] Заголовки образуют иерархию (`h1` → `h2` → …), один `h1` на страницу.
- [ ] Кнопки и ссылки имеют осмысленный текст или `aria-label` (иконки без текста).
- [ ] Формы: поля связаны с подписями (`<label for="...">` или `aria-labelledby`), группы полей при необходимости с `fieldset`/`legend`.
- [ ] Модальные окна: `role="dialog"`, `aria-modal="true"`, `aria-labelledby` для заголовка, фокус внутри модалки и возврат фокуса при закрытии.

### 2. ARIA

- [ ] Динамические сообщения (ошибки, успех): `role="alert"` или `aria-live="polite"`/`assertive"` где нужно.
- [ ] Раскрывающиеся блоки/аккордеоны: `aria-expanded`, `aria-controls`.
- [ ] Декоративные изображения: `alt=""` или `aria-hidden="true"`.
- [ ] Интерактивные элементы с состоянием загрузки: `aria-busy`, `aria-disabled` при необходимости.

### 3. Контраст

- [ ] Текст и фон: контраст не ниже 4.5:1 (обычный текст), 3:1 для крупного.
- [ ] Кнопки и ссылки: видимы и различимы в обычном и focus-состоянии.
- [ ] Проверка: DevTools (Lighthouse → Accessibility) или расширение axe DevTools / WAVE.

### 4. Фокус и клавиатура

- [ ] Вся основная навигация и действия доступны с клавиатуры (Tab, Enter, Space, Escape для модалок).
- [ ] Видимая индикация фокуса (outline/focus ring) не отключена глобально.
- [ ] Ловушка фокуса в модалках: фокус не уходит «за» диалог, при закрытии возвращается на открывший элемент.
- [ ] Пропуск блоков: при необходимости «Skip to main content» для быстрого перехода.

## Инструменты

- **ESLint**: в проекте используется `eslint-config-next`, который включает `eslint-plugin-jsx-a11y` — запуск `pnpm -C apps/web lint` проверяет часть правил в коде.
- **Браузер**: расширения [axe DevTools](https://www.deque.com/axe/devtools/) или [WAVE](https://wave.webaim.org/extension/); встроенный Lighthouse (Chrome DevTools → Lighthouse → Accessibility).
- **Ручная проверка**: навигация только с клавиатуры (Tab, Shift+Tab, Enter, Space, Escape) по ключевым сценариям.

## Когда проводить аудит

- Перед крупным релизом или выходом значимых изменений по бронированию/дашборду/кабинету.
- После больших рефакторингов ключевых страниц.
- По мере появления новых ключевых потоков — добавить их в список страниц и чеклист выше.

## Связанные документы

- В проекте уже проведён базовый a11y-аудит (модалки, алерты, пикеры, навигация): см. `DEEP_ANALYSIS_ISSUES.md`, раздел 16.
- Компоненты с учётом a11y: `Toast`, `QRCodeGenerator`, `Input`, `Button`, `ProgressBar`, `DatePickerPopover`, `MonthPickerPopover`, `DashboardNav`, `StaffMobileSidebar` и др.
