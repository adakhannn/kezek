# Инструкция по тестированию мобильного приложения

## Подготовка

### 1. Установите зависимости

```bash
cd apps/mobile
pnpm install
```

### 2. Настройте переменные окружения

Создайте файл `apps/mobile/.env.local` (или `.env`) со следующим содержимым:

```env
EXPO_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
EXPO_PUBLIC_SUPABASE_ANON_KEY=your_anon_key
EXPO_PUBLIC_API_URL=https://kezek.kg
```

**Где взять значения:**
- `EXPO_PUBLIC_SUPABASE_URL` и `EXPO_PUBLIC_SUPABASE_ANON_KEY` - из `apps/web/.env.local` (те же значения, что используются в web версии)
- `EXPO_PUBLIC_API_URL` - URL вашего продакшн API (обычно `https://kezek.kg`)

### 3. Установите Expo Go на телефон

- **iOS**: [Expo Go в App Store](https://apps.apple.com/app/expo-go/id982107779)
- **Android**: [Expo Go в Google Play](https://play.google.com/store/apps/details?id=host.exp.exponent)

## Запуск приложения

### Вариант 1: На физическом устройстве (рекомендуется)

1. Запустите dev server:
```bash
cd apps/mobile
pnpm start
```

2. Откройте Expo Go на телефоне
3. Отсканируйте QR-код из терминала:
   - **iOS**: Откройте камеру и наведите на QR-код
   - **Android**: Откройте Expo Go и нажмите "Scan QR code"

### Вариант 2: На эмуляторе/симуляторе

**iOS Simulator (только на Mac):**
```bash
cd apps/mobile
pnpm ios
```

**Android Emulator:**
```bash
cd apps/mobile
pnpm android
```

**Web (для быстрого тестирования UI):**
```bash
cd apps/mobile
pnpm web
```

## Чек-лист тестирования

### Авторизация
- [ ] Вход через Email + OTP
- [ ] Вход через Phone + OTP
- [ ] Вход через Google OAuth
- [ ] Регистрация нового пользователя
- [ ] Валидация полей (email, phone, код)
- [ ] Отображение ошибок валидации
- [ ] Повторная отправка кода

### Главный экран
- [ ] Отображение списка бизнесов
- [ ] Поиск бизнесов
- [ ] Pull-to-refresh
- [ ] Переход на экран бронирования

### Бронирование
- [ ] Выбор филиала
- [ ] Выбор услуги
- [ ] Выбор мастера
- [ ] Выбор даты
- [ ] Выбор времени
- [ ] Создание бронирования
- [ ] Отображение ошибок при создании

### Личный кабинет
- [ ] Отображение предстоящих бронирований
- [ ] Отображение прошедших бронирований
- [ ] Переключение между вкладками
- [ ] Переход к деталям бронирования
- [ ] Pull-to-refresh
- [ ] Отмена бронирования

### Детали бронирования
- [ ] Отображение всей информации
- [ ] Отмена бронирования
- [ ] Валидация возможности отмены

### Профиль
- [ ] Редактирование имени
- [ ] Редактирование телефона
- [ ] Настройки уведомлений (Email, WhatsApp)
- [ ] Сохранение изменений
- [ ] Выход из аккаунта

### Кабинет бизнеса (для владельцев)
- [ ] Отображение списка бизнесов
- [ ] Pull-to-refresh
- [ ] Пустое состояние (если не владелец)

### Кабинет сотрудника (для сотрудников)
- [ ] Отображение информации о сотруднике
- [ ] Отображение предстоящих записей
- [ ] Pull-to-refresh
- [ ] Пустое состояние (если не сотрудник)

### Общие функции
- [ ] Toast уведомления (успех, ошибка)
- [ ] Обработка ошибок сети
- [ ] Состояния загрузки
- [ ] Пустые состояния
- [ ] Навигация между экранами
- [ ] Кнопка "Назад"

## Известные проблемы

Если вы столкнулись с проблемами:

1. **"Unable to resolve module"**
   ```bash
   rm -rf node_modules
   pnpm install
   ```

2. **Metro bundler не запускается**
   ```bash
   npx expo start --clear
   ```

3. **Проблемы с кэшем**
   ```bash
   npx expo start -c
   ```

4. **Ошибки с переменными окружения**
   - Убедитесь, что файл `.env.local` находится в `apps/mobile/`
   - Перезапустите Expo после изменения переменных
   - Используйте префикс `EXPO_PUBLIC_` для всех переменных

5. **Ошибки подключения к Supabase**
   - Проверьте правильность URL и ключа
   - Убедитесь, что Supabase проект активен
   - Проверьте настройки CORS в Supabase

## Отчет о тестировании

После тестирования заполните:

- ✅ Работает
- ⚠️ Работает с проблемами
- ❌ Не работает

Для каждого пункта из чек-листа укажите статус и опишите найденные проблемы.

